(this["webpackJsonpeth-storage-basic"]=this["webpackJsonpeth-storage-basic"]||[]).push([[0],{100:function(e,t){},122:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(91),c=n(84),i=n(53),s=n(33),u=(n(74),n(27)),l=n(10);function b(e){var t=e.onSubmit;return Object(l.jsx)("form",{children:Object(l.jsx)("button",{type:"button",name:"deposit",onClick:function(e){e.preventDefault(),t()},children:"Deposit"})})}function d(){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:["This app demonstrates the client-side usage of ",Object(l.jsx)("a",{href:"https://near.storage",target:"_blank",rel:"noreferrer",children:"the NEAR to Filecoin bridge"}),", allowing ",Object(l.jsx)("a",{href:"https://near.org",target:"_blank",rel:"noreferrer",children:"NEAR"})," users to store data on the ",Object(l.jsx)("a",{href:"https://filecoin.io",target:"_blank",rel:"noreferrer",children:"Filecoin"})," network."]}),Object(l.jsxs)("p",{children:['This is version 0 of the demo app. You can deposit and release funds, query for the status of a "file" or deal, and more. This is a beta release demo, do not store personal, encrypted, or illegal data. Data will not be available permanently on either Filecoin or IPFS. See the ',Object(l.jsx)("a",{href:"https://near.storage/terms",target:"_blank",rel:"noreferrer",children:"terms of service"})," before using the demo."]}),Object(l.jsx)("p",{children:"Go ahead and sign in to try it out!"})]})}function h(e){var t=e.inProgress,n=e.onSubmit,r=Object(u.useState)(),a=Object(s.a)(r,2),o=a[0],c=a[1];return Object(l.jsx)("form",{children:Object(l.jsxs)("fieldset",{id:"fieldset",children:[Object(l.jsx)("input",{type:"file",name:"file",onChange:function(e){e.target.files&&c(e.target.files[0])}}),Object(l.jsx)("button",{type:"button",name:"upload",className:!0===t?"loading":"",onClick:function(e){e.preventDefault(),o&&n(o),c(void 0)},children:"Upload"})]})})}var j=n(61),f=function(e){var t=e.network,n=e.wallet,r=e.api,a=e.address,o=Object(u.useState)([]),c=Object(s.a)(o,2),f=c[0],p=c[1],m=Object(u.useState)(!1),O=Object(s.a)(m,2),g=O[0],x=O[1],w=Object(u.useState)(!1),y=Object(s.a)(w,2),k=y[0],v=y[1],S=Object(u.useState)(""),D=Object(s.a)(S,2),C=D[0],P=D[1],E=Object(u.useState)(""),F=Object(s.a)(E,2),M=F[0],T=F[1],I=Object(u.useState)(""),R=Object(s.a)(I,2),A=R[0],N=R[1];Object(u.useEffect)((function(){if(n&&r.hasDeposit().then(v),t&&t.name)switch(t.name){case"matic":P("Polygon"),T("MATIC"),N("Polygon Mainnet");break;case"maticmum":P("Polygon"),T("MATIC"),N("Polygon Mumbai");break;case"rinkeby":P("Ethereum"),T("\u039e"),N("Ethereum Rinkeby");break;default:P(""),T("")}}),[n,r,t]);return Object(l.jsxs)("main",{children:[Object(l.jsx)("header",{children:Object(l.jsxs)("h1",{children:["Textile ","".concat(C)," Storage Demo"]})}),Object(l.jsx)("p",{children:k?"You got ".concat(M," in here!"):"Deposit some funds, ".concat(a,"!")}),a?Object(l.jsxs)("div",{children:[Object(l.jsx)(b,{onSubmit:function(){r.addDeposit().then((function(){return v(!0)})).catch((function(e){return alert(e.message)}))}}),k?Object(l.jsx)(h,{onSubmit:function(e){x(!0),r.store(e).then((function(e){p([].concat(Object(i.a)(f),[e])),x(!1),alert("IPFS CID:\n".concat(e.cid["/"]))})).catch((function(e){x(!1),alert(e.message)}))},inProgress:g}):null,Object(l.jsx)("button",{type:"button",name:"release",onClick:function(e){e.preventDefault(),r.releaseDeposit().then((function(){alert("if your session is over, your funds should be returned"),window.location.reload()})).catch((function(e){return alert(e.message)}))},children:"Release"}),Object(l.jsx)("br",{}),f&&Object(l.jsx)("h2",{children:"Your uploads"}),f.map((function(e){return Object(l.jsxs)("p",{children:[e.cid["/"],Object(l.jsx)("br",{}),Object(l.jsx)("button",{type:"button",name:"copy",onClick:function(t){t.preventDefault(),navigator.clipboard.writeText(e.cid["/"])},children:"Copy CID"}),Object(l.jsx)("button",{type:"button",name:"status",onClick:function(t){var n;t.preventDefault(),(n=e.id)?r.status(n).then((function(e){var t=e.request;alert('Filecoin deal status: "'.concat(j.a[t.status_code],'"!'))})).catch((function(e){return alert(e.message)})):console.warn("no 'active' file, upload a file first")},children:"Status"}),Object(l.jsx)("br",{})]})})),Object(l.jsx)("br",{}),Object(l.jsx)("p",{children:Object(l.jsx)("i",{children:"You are connected on ".concat(A,". Try this demo on Ethereum Rinkeby, Polygon Mumbai, or Polygon Mainnet.")})})]}):Object(l.jsx)(d,{})]})},p=n(89),m=n.n(p),O=n(37),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},x=(n(122),["matic","maticmum","rinkeby"]),w="Matic Mainnet, Matic Mumbai, and Ethereum Rinkeby";function y(){return(y=Object(c.a)(a.a.mark((function e(){var t,n,r,o,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}throw new Error("No web3 provider found. Please install metamask browser extension.");case 2:return e.next=4,window.ethereum.enable();case 4:return t=new O.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=8,t.getNetwork();case 8:if(r=e.sent,-1!==x.indexOf(r.name)){e.next=11;break}throw new Error("Only ".concat(w," networks are currently supported. Switch your wallet connection and refresh the webpage."));case 11:return e.next=13,Object(j.b)(n);case 13:return o=e.sent,e.next=16,n.getAddress();case 16:return c=e.sent,e.abrupt("return",{network:r,api:o,wallet:n,address:c});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return y.apply(this,arguments)})().then((function(e){m.a.render(Object(l.jsx)(f,Object(o.a)({},e)),document.getElementById("root"))})).catch((function(e){alert(e.message)})),g()}},[[124,1,2]]]);
//# sourceMappingURL=main.5c9d18d5.chunk.js.map