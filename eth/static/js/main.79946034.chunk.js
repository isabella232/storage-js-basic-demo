(this["webpackJsonpeth-storage-basic"]=this["webpackJsonpeth-storage-basic"]||[]).push([[0],{100:function(e,t){},122:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(91),s=n(84),o=n(53),i=n(39),l=(n(74),n(32)),u=n(12);function d(e){var t=e.onSubmit;return Object(u.jsx)("form",{children:Object(u.jsx)("button",{type:"button",name:"deposit",onClick:function(e){e.preventDefault(),t()},children:"Deposit"})})}function b(){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:["This app demonstrates the client-side usage of ",Object(u.jsx)("a",{href:"https://near.storage",target:"_blank",rel:"noreferrer",children:"the NEAR to Filecoin bridge"}),", allowing ",Object(u.jsx)("a",{href:"https://near.org",target:"_blank",rel:"noreferrer",children:"NEAR"})," users to store data on the ",Object(u.jsx)("a",{href:"https://filecoin.io",target:"_blank",rel:"noreferrer",children:"Filecoin"})," network."]}),Object(u.jsxs)("p",{children:['This is version 0 of the demo app. You can deposit and release funds, query for the status of a "file" or deal, and more. This is a beta release demo, do not store personal, encrypted, or illegal data. Data will not be available permanently on either Filecoin or IPFS. See the ',Object(u.jsx)("a",{href:"https://near.storage/terms",target:"_blank",rel:"noreferrer",children:"terms of service"})," before using the demo."]}),Object(u.jsx)("p",{children:"Go ahead and sign in to try it out!"})]})}function j(e){var t=e.inProgress,n=e.onSubmit,r=Object(l.useState)(),a=Object(i.a)(r,2),c=a[0],s=a[1];return Object(u.jsx)("form",{children:Object(u.jsxs)("fieldset",{id:"fieldset",children:[Object(u.jsx)("input",{type:"file",name:"file",onChange:function(e){e.target.files&&s(e.target.files[0])}}),Object(u.jsx)("button",{type:"button",name:"upload",className:!0===t?"loading":"",onClick:function(e){e.preventDefault(),c&&n(c),s(void 0)},children:"Upload"})]})})}var h=n(61),f=function(e){var t=e.wallet,n=e.api,r=e.address,a=Object(l.useState)([]),c=Object(i.a)(a,2),s=c[0],f=c[1],p=Object(l.useState)(!1),O=Object(i.a)(p,2),g=O[0],x=O[1],m=Object(l.useState)(!1),v=Object(i.a)(m,2),w=v[0],y=v[1];Object(l.useEffect)((function(){t&&n.hasDeposit().then(y)}),[t,n]);return Object(u.jsxs)("main",{children:[Object(u.jsx)("header",{children:Object(u.jsx)("h1",{children:"Textile \u039ethereum Storage Demo"})}),Object(u.jsx)("p",{children:w?"You got \u039e in here!":"Deposit some funds, ".concat(r,"!")}),r?Object(u.jsxs)("div",{children:[Object(u.jsx)(d,{onSubmit:function(){n.addDeposit().then((function(){return y(!0)})).catch((function(e){return alert(e.message)}))}}),w?Object(u.jsx)(j,{onSubmit:function(e){x(!0),n.store(e).then((function(e){f([].concat(Object(o.a)(s),[e])),x(!1),alert("IPFS CID:\n".concat(e.cid["/"]))})).catch((function(e){x(!1),alert(e.message)}))},inProgress:g}):null,Object(u.jsx)("button",{type:"button",name:"release",onClick:function(e){e.preventDefault(),n.releaseDeposits().then((function(){alert("check your wallet in case of released funds"),window.location.reload()})).catch((function(e){return alert(e.message)}))},children:"Release"}),Object(u.jsx)("br",{}),s&&Object(u.jsx)("h2",{children:"Your uploads"}),s.map((function(e){return Object(u.jsxs)("p",{children:[e.cid["/"],Object(u.jsx)("br",{}),Object(u.jsx)("button",{type:"button",name:"copy",onClick:function(t){t.preventDefault(),navigator.clipboard.writeText(e.cid["/"])},children:"Copy CID"}),Object(u.jsx)("button",{type:"button",name:"status",onClick:function(t){var r;t.preventDefault(),(r=e.id)?n.status(r).then((function(e){var t=e.request;alert('Filecoin deal status: "'.concat(h.a[t.status_code],'"!'))})).catch((function(e){return alert(e.message)})):console.warn("no 'active' file, upload a file first")},children:"Status"}),Object(u.jsx)("br",{})]})}))]}):Object(u.jsx)(b,{})]})},p=n(89),O=n.n(p),g=n(36),x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(122);function m(){return(m=Object(s.a)(a.a.mark((function e(){var t,n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.enable();case 2:return t=new g.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=6,Object(h.b)(n);case 6:return r=e.sent,e.next=9,n.getAddress();case 9:return c=e.sent,e.abrupt("return",{api:r,wallet:n,address:c});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return m.apply(this,arguments)})().then((function(e){O.a.render(Object(u.jsx)(f,Object(c.a)({},e)),document.getElementById("root"))})),x()}},[[124,1,2]]]);
//# sourceMappingURL=main.79946034.chunk.js.map